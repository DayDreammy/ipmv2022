\usepackage{bm}
# Lecture 11 Stereo Matching

## ç›®å½•

*   *   [çº¿ç´¢](#çº¿ç´¢)

    *   [ç¬”è®°](#ç¬”è®°)

*   [1 Preliminaries](#1-preliminaries)

    *   [1.1 Triangulation ä¸‰è§’åŒ–](#11-triangulation-ä¸‰è§’åŒ–)

    *   [1.2 Stereo rectification åŒç›®ç«‹ä½“åŒ¹é…](#12-stereo-rectification-åŒç›®ç«‹ä½“åŒ¹é…)

        *   [1.2.1åŒç›®ç›¸æœºç³»ç»Ÿæ ¡æ­£](#121åŒç›®ç›¸æœºç³»ç»Ÿæ ¡æ­£)

        *   [1.2.2è§†å·®å’Œæ·±åº¦çš„å…³ç³»](#122è§†å·®å’Œæ·±åº¦çš„å…³ç³»)

*   [2 Stereo matching è§†å·®åŒ¹é…](#2-stereo-matching-è§†å·®åŒ¹é…)

    *   [2.1è§†å·®åŒ¹é…æ–¹æ³•](#21è§†å·®åŒ¹é…æ–¹æ³•)

    *   [2.2è§†å·®åŒ¹é…æ­¥éª¤](#22è§†å·®åŒ¹é…æ­¥éª¤)

        *   [2.2.1åŸºæœ¬æ–¹æ³•ï¼šé€‰ä¸€ä¸ªç‚¹ï¼Œé€åƒç´ åŒ¹é…](#221åŸºæœ¬æ–¹æ³•é€‰ä¸€ä¸ªç‚¹é€åƒç´ åŒ¹é…)

            *   [STEP1 å·¦å³å›¾åƒåˆ†åˆ«æ‰¾åˆ°ä¸¤ä¸ªç‚¹ï¼Œç”»Cost-Disparityå›¾(è§†å·®-ä»£ä»·å›¾)](#step1-å·¦å³å›¾åƒåˆ†åˆ«æ‰¾åˆ°ä¸¤ä¸ªç‚¹ç”»cost-disparityå›¾è§†å·®-ä»£ä»·å›¾)

            *   [STEP2 å·¦å›¾ç‚¹ä¿æŒä¸åŠ¨ï¼Œå³å›¾ç‚¹å¾€å·¦ç§»ä¸€ä¸ªé•¿åº¦ï¼Œå†æ¬¡è®¡ç®—Cost-Disparity](#step2-å·¦å›¾ç‚¹ä¿æŒä¸åŠ¨å³å›¾ç‚¹å¾€å·¦ç§»ä¸€ä¸ªé•¿åº¦å†æ¬¡è®¡ç®—cost-disparity)

            *   [STEPn å³å›¾çš„ç‚¹ä¸æ–­å‘å·¦æ»‘åŠ¨ï¼Œè®¡ç®—Cost-Disparityï¼Œæ‰¾åˆ°costæœ€å°çš„ç‚¹ï¼Œå¯¹åº”æœ€ä½³è§†å·®](#stepn-å³å›¾çš„ç‚¹ä¸æ–­å‘å·¦æ»‘åŠ¨è®¡ç®—cost-disparityæ‰¾åˆ°costæœ€å°çš„ç‚¹å¯¹åº”æœ€ä½³è§†å·®)

        *   [2.2.2è¿›é˜¶æ–¹æ³•ï¼šé€‰ä¸€ä¸ªæ¡†ï¼ŒåŒ¹é…æ›´å¤§çš„åŒºåŸŸ](#222è¿›é˜¶æ–¹æ³•é€‰ä¸€ä¸ªæ¡†åŒ¹é…æ›´å¤§çš„åŒºåŸŸ)

        *   [2.2.3 cost è®¡ç®—](#223-cost-è®¡ç®—)

            *   [A. é€åƒç´ åŒ¹é…](#a-é€åƒç´ åŒ¹é…)

            *   [B. æ–¹æ¡†èšåˆ: SAD/SSD](#b-æ–¹æ¡†èšåˆ-sadssd)

            *   [C. å½’ä¸€åŒ–äº’ç›¸å…³ï¼šNCCï¼ŒæŠ—å¹²æ‰°](#c-å½’ä¸€åŒ–äº’ç›¸å…³nccæŠ—å¹²æ‰°)

            *   [D. è‡ªé€‚åº”ä»£ä»·èšåˆ:FBS](#d-è‡ªé€‚åº”ä»£ä»·èšåˆfbs)

            *   [Question:æ€ä¹ˆä¼˜åŒ–c\_{SSD}](#questionæ€ä¹ˆä¼˜åŒ–c_ssd)

*   [\$\$
    c\_{SSD}(\bm p,d) =  \sum\_{q\in \mathscr{N}\_p}(i\_L(\bm q) - i\_R(\bm q- \bm d))^2
    \\](#c_ssdbm-pd---sum_qin-mathscrn_pi_lbm-q---i_rbm-q--bm-d2)

*   [\\](#)

*   [3 Disparity Optimization è§†å·®ä¼˜åŒ–](#3-disparity-optimization-è§†å·®ä¼˜åŒ–)

    *   [3.1é©¬å°”ç§‘å¤«é“¾ï¼ˆMRF)](#31é©¬å°”ç§‘å¤«é“¾mrf)

    *   [3.2èƒ½é‡å‡½æ•°](#32èƒ½é‡å‡½æ•°)

    *   [3.3 SGM : Semi-global matching](#33-sgm--semi-global-matching)

*   [4 Disparity Refinement è§†å·®æ”¹å–„](#4-disparity-refinement-è§†å·®æ”¹å–„)

    *   [4.1å·¦å³è§†å·®ä¸€è‡´æ€§æ£€æµ‹](#41å·¦å³è§†å·®ä¸€è‡´æ€§æ£€æµ‹)

    *   [4.2äºšåƒç´ å¢å¼º](#42äºšåƒç´ å¢å¼º)

*   [5 Deep Stereo Matching æ·±åº¦è§†å·®åŒ¹é…](#5-deep-stereo-matching-æ·±åº¦è§†å·®åŒ¹é…)

    *   [5.1æ·±åº¦è§†å·®åŒ¹é…æ–¹æ³•](#51æ·±åº¦è§†å·®åŒ¹é…æ–¹æ³•)

    *   [5.2 CNNï¼Œå·ç§¯ç¥ç»ç½‘ç»œçš„ä½¿ç”¨](#52-cnnå·ç§¯ç¥ç»ç½‘ç»œçš„ä½¿ç”¨)

    *   [5.3æ‰©å±•ï¼šæœºå™¨å­¦ä¹ ](#53æ‰©å±•æœºå™¨å­¦ä¹ )

*   [6 Performance Evaluation æ€§èƒ½è¯„ä¼°](#6-performance-evaluation-æ€§èƒ½è¯„ä¼°)

    *   [6.1 Root mean squared (RMS) error eRMS: å‡æ–¹æ ¹è¯¯å·®](#61-root-mean-squared-rms-error-erms-å‡æ–¹æ ¹è¯¯å·®)

    *   [6.2 Percentage of error pixels(PEP) ePEP(tolerance:\delta\_d pixels](#62-percentage-of-error-pixelspep-epeptolerancedelta_d-pixels)

    *   [ 6.3 millions of disparity evaluations per second](#-63-millions-of-disparity-evaluations-per-second)

*   [7 Maybe](#7-maybe)

    *   [æ€»ç»“](#æ€»ç»“)

## çº¿ç´¢

*è¿™é‡Œå†™ä¸»è¦çº¿ç´¢*

***

1.

2.

3.

4.

5.

<!---->

1.

## ç¬”è®°

*è¿™ä¸€ä¸ª*Lectureçš„å†…å®¹ååˆ†çš„ä¸°å¯Œï¼Œå¯ä»¥å½“ä½œä¸¤ä¸ªLectureæ¥çœ‹ã€‚

ï¼ˆæ€ä¹ˆè¿˜ä¸å­¦ï¼Ÿå¿«å­¦ï¼ï¼ï¼‰

***

# 1 Preliminaries

## 1.1 Triangulation ä¸‰è§’åŒ–

![](image/image_doVUGM2-wk.png)

*   åœ¨è®¡ç®—æœºè§†è§‰ä¸‰è§’æµ‹é‡ä¸­ï¼ŒæŒ‡çš„æ˜¯åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„**ä¸€ä¸ªç‚¹æŠ•å½±åˆ°ä¸¤å¹…æˆ–ä¸¤å¹…ä»¥ä¸Šçš„å›¾åƒä¸Šï¼Œç¡®å®šå¯¹åº”ç‚¹**çš„è¿‡ç¨‹ã€‚

*   ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰å¿…è¦çŸ¥é“æ‘„åƒæœºæŠ•å½±å‡½æ•°ä»ä¸‰ç»´åˆ°äºŒç»´çš„å‚æ•°ï¼Œæœ€ç®€å•çš„æƒ…å†µæ˜¯ç”¨**æ‘„åƒæœºå†…å‚çŸ©é˜µ**è¡¨ç¤ºã€‚

## 1.2 Stereo rectification åŒç›®ç«‹ä½“åŒ¹é…

### 1.2.1åŒç›®ç›¸æœºç³»ç»Ÿæ ¡æ­£

![](image/image_GnWTLh4Cs2.png)

ç»è¿‡æ ¡æ­£ä»¥åï¼Œå¾—åˆ°æœ€åŸºæœ¬çš„åŒç›®ç›¸æœºç«‹ä½“ç³»ç»Ÿã€‚

> æ€ä¹ˆæ ¡æ­£çš„ï¼Ÿå¿˜äº†çš„åŒå­¦èµ¶å¿«å»3.1åŒç›®ç›¸æœºæ ¡æ­£æ­¥éª¤å¤ä¹ ä¸€ä¸‹

![](image/image_6PNbBYKHUW.png)

### 1.2.2è§†å·®å’Œæ·±åº¦çš„å…³ç³»

åŒæ ·åœ°ï¼Œä¹Ÿæ˜¯Lecture3 çš„å†…å®¹ã€‚

ä¸€å¯¹å·¦å³å¹³é¢å¯¹åº”çš„ç‚¹æœ‰ä»¥ä¸‹å…³ç³»

$$
\bm p\_L = \left\[\begin{array}{} u\_L \ v\_L \ \end{array}\right] = \left\[\begin{array}{} f \frac{x^{\mathrm{W}}+T\_{c} / 2}{z^{\mathrm{W}}} + u\_o\\\ f \frac{y^W}{z^W} + v\_o \ \end{array}\right] \ï¼Œ \ \bm p\_R = \left\[\begin{array}{} u\_R \ v\_R \ \end{array}\right] = \left\[\begin{array}{} f \frac{x^{\mathrm{W}}-T\_{c} / 2}{z^{\mathrm{W}}} + u\_o\\\ f \frac{y^W}{z^W} + v\_o \ \end{array}\right]
$$

è§†å·®å’Œæ·±åº¦çš„å…³ç³»ï¼šæˆåæ¯”ã€‚

$$
d= u\_L - u\_R = f\frac{Tc}{z^W}
$$

# 2 Stereo matching è§†å·®åŒ¹é…

**ä»»åŠ¡ï¼šåŒ¹é…å¯¹åº”ç‚¹**

## 2.1è§†å·®åŒ¹é…æ–¹æ³•

*   ä¼ ç»Ÿè§†å·®ä¼°è®¡æ–¹æ³•ï¼Œå®Œå…¨æ•°å­¦å»ºæ¨¡çš„æ–¹æ³•

    *   å±€éƒ¨ç®—æ³•ï¼Œå·¦å›¾ä¸­é€‰ä¸ªæ¡†ï¼Œå³å›¾ä¸­é€‰ä¸€ç³»åˆ—æ¡†æ¥åŒ¹é…ã€‚æœ€å¥½çš„è§†å·®åŒ¹é…æ˜¯å·¦å³æ¡†ä¸åŒæœ€å°çš„é‚£ä¸€ç»„

    *   å…¨å±€æ–¹æ³•ï¼Œè®¾è®¡ä¸€ä¸ªèƒ½é‡æ–¹ç¨‹ï¼Œä¼˜åŒ–è¿­ä»£ï¼Œå¾—åˆ°ä¸€ä¸ªèƒ½é‡æœ€å°çš„ä¸€ç»„æˆ–å¯èƒ½æ€§æœ€å¤§çš„ä¸€ç»„ã€‚å¸¸åŸºäºé©¬å°”ç§‘å¤«é“¾ä¼˜åŒ–æ–¹æ³•

    *   åŠå…¨å±€æ–¹æ³•ï¼ˆSemi-global matching (SGM)ï¼‰ï¼Œå¯¹å›¾åƒè¿›è¡Œå…¨æ–¹ä½çš„ä»£ä»·èšåˆæ¥é€¼è¿‘ MRFï¼ˆé©¬å°”ç§‘å¤«é“¾ï¼‰ æ¨ç†ï¼Œæå¤§åœ°æé«˜äº†è§†å·®ä¼°è®¡çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ã€‚

*   æ·±åº¦å­¦ä¹ æ–¹æ³•

    *   å…¨ç›‘ç£

    *   è‡ªç›‘ç£/æ— ç›‘ç£

## 2.2è§†å·®åŒ¹é…æ­¥éª¤

![](image/image_1u73PQiGWO.png)

è§†å·®dæ˜¯ä¸€ä¸ªéšæœºå˜é‡ï¼Œæœ‰Nä¸ªå¯èƒ½çš„ç¦»æ•£çŠ¶æ€ï¼Œæ¯ä¸€ä¸ªdå¯¹åº”ä¸€ä¸ªåŒ¹é…ä»£ä»·cost c.å› æ­¤è§†å·®åŒ¹é…æ–¹æ³•å°±å½¢å¼åŒ–ä¸ºåŒ¹é…ä»£ä»·costè®¡ç®—é—®é¢˜ã€‚

å·¦å›¾ä¸ºåŸºå‡†ï¼Œä¸æ–­ç§»åŠ¨å³å›¾å¯¹åº”ç‚¹ï¼Œç”»å‡ºè§†å·®-ä»£ä»·å›¾ã€‚æ‰¾costæœ€å°å€¼æ‰€åœ¨çš„ç‚¹ï¼Œå°±æ˜¯æœ€ä½³è§†å·®ã€‚

*   costæ€ä¹ˆç®—ï¼Ÿ

    *   ç°åº¦å€¼ï¼Œ$I(m,n) \in N(0,255)$

    *   åŒä¸€ä¸ªç‚¹å¯èƒ½åœ¨ä¸¤å¹…å›¾ä¸­çš„ç°åº¦å€¼å·®ä¸å¤š

    *   å¯ä»¥è‡ªç„¶åœ°è®¾è®¡å‡ºè¿™ä¸¤ç§ä»£ä»·è¡¡é‡æ–¹å¼

        *   ç»å¯¹å·®$  cost = |I\_L - I\_R| $

        *   å¹³æ–¹å·®$  cost = |I\_L - I\_R|^2 $

*   å·¦å›¾åŸºå‡†ï¼Œå³å›¾æ‰¾ç‚¹æ˜¯å¾€å·¦å»åŒ¹é…ã€‚ï¼ˆå› ä¸ºå·¦çœ¼çœ‹åˆ°çš„å†…å®¹ï¼Œåœ¨å³çœ¼çœ‹æ¥æ˜¯æ¯”è¾ƒåå·¦çš„ï¼‰

ä¼ ç»Ÿçš„è§†å·®åŒ¹é…ç®—æ³•ä¸€èˆ¬åŒ…æ‹¬å››ä¸ªä¸»è¦æ­¥éª¤ï¼š

1.  ä»£ä»·è®¡ç®—ï¼Œ

2.  ä»£ä»·èšåˆï¼Œ

3.  è§†å·®ä¼˜åŒ–ï¼Œ

4.  è§†å·®æ”¹å–„ã€‚

### 2.2.1åŸºæœ¬æ–¹æ³•ï¼šé€‰ä¸€ä¸ªç‚¹ï¼Œé€åƒç´ åŒ¹é…

#### STEP1 å·¦å³å›¾åƒåˆ†åˆ«æ‰¾åˆ°ä¸¤ä¸ªç‚¹ï¼Œç”»Cost-Disparityå›¾(è§†å·®-ä»£ä»·å›¾)

![](image/image_669YV3C46E.png)

#### STEP2 å·¦å›¾ç‚¹ä¿æŒä¸åŠ¨ï¼Œå³å›¾ç‚¹å¾€å·¦ç§»ä¸€ä¸ªé•¿åº¦ï¼Œå†æ¬¡è®¡ç®—Cost-Disparity

![](image/image_9J4N8emH_c.png)

#### STEPn å³å›¾çš„ç‚¹ä¸æ–­å‘å·¦æ»‘åŠ¨ï¼Œè®¡ç®—Cost-Disparityï¼Œæ‰¾åˆ°costæœ€å°çš„ç‚¹ï¼Œå¯¹åº”æœ€ä½³è§†å·®

![](image/image_eoScRi0mpL.png)

### 2.2.2è¿›é˜¶æ–¹æ³•ï¼šé€‰ä¸€ä¸ªæ¡†ï¼ŒåŒ¹é…æ›´å¤§çš„åŒºåŸŸ

![](image/image_wYIWByO6RY.png)

å’Œé€‰ä¸€ä¸ªç‚¹ç±»ä¼¼ï¼Œåªä¸è¿‡ä»ä¸€ä¸ªç‚¹ä¸€ä¸ªç‚¹åŒ¹é…ï¼Œå˜æˆä¸€ä¸ªåŒºåŸŸä¸€ä¸ªåŒºåŸŸåŒ¹é…ã€‚é€šå¸¸é€‰çš„æ˜¯çŸ©å½¢æ¡†

![](image/image_PuLOrLwfGL.png)

> ä¸€ä¸ªå¤§çš„åŒºåŸŸï¼Œéƒ½è®¤ä¸ºåŒ¹é…å¾—æ›´å‡†ï¼Œè¿™æ ·æ›´å¯é ã€‚åŒæ ·ï¼Œä¼šä½¿å¾—è®¡ç®—é‡å¢å¤§ï¼Œç®—æ³•æ•ˆç‡ä¸‹é™ã€‚æ‰€ä»¥è¿™ä¸ª support region çš„å¤§å°æ˜¯éœ€è¦ç²¾å¿ƒæŒ‘é€‰çš„ï¼Œ**åœ¨ç²¾åº¦å’Œé€Ÿåº¦ä¹‹é—´åšå¹³è¡¡**ã€‚

### 2.2.3 cost è®¡ç®—

#### A. é€åƒç´ åŒ¹é…

å·¦å³å›¾åƒä¸€èˆ¬ç”¨ç°åº¦å›¾ï¼Œç»å¯¹å·®$ c\_{AD}  $ã€å¹³æ–¹å·®$c\_{SD}$è¿™æ ·è®¡ç®—ï¼š

$$
c\_{AD}(\bm p,d) = |i\_L(\bm p) - i\_R(\bm p- \bm d)|,\\
c\_{SD}(\bm p,d) = (i\_L(\bm p) - i\_R(\bm p- \bm d))^2,
$$

è¿™é‡Œ $ \bm d = \[d,0]^T  $,$i\_L(\bm p)$ä»£è¡¨å·¦å›¾$\bm p = \[u,v]^T$ç‚¹çš„åƒç´ äº®åº¦ï¼Œ$i\_R(\bm p - \bm d)$ä»£è¡¨å³å›¾$\bm p - \bm  d = \[u-d,v]^T$ç‚¹çš„åƒç´ äº®åº¦ã€‚

ä¸ºäº†æœ€å°åŒ–é”™è¯¯åŒ¹é…ï¼Œåƒç´ çº§çš„åå·®é€šå¸¸è¢«èšåˆèµ·æ¥ï¼Œ**è®¡ç®—ä¸€å—åŒºåŸŸé‡Œæ‰€æœ‰åƒç´ çš„ä»£ä»·**ã€‚å¦‚ä½•è®¡ç®—èšåˆåŒºåŸŸé‡Œçš„ä»£ä»·ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ã€‚

#### B. æ–¹æ¡†èšåˆ: SAD/SSD

$$
c\_{agg}(\bm p,d)=w(\bm p,d) \* C(\bm p,d),
$$

è¿™å—åŒºåŸŸçš„ä¸­å¿ƒåœ¨$\bm p =\[u,v]^T$ï¼Œå¯¹åº”çš„è§†å·®æ˜¯$d$,$c\_{agg}$ä»£è¡¨èšåˆä»£ä»·ï¼Œ$ w  $æ˜¯ä¸€ä¸ªkernelä»£è¡¨è¿™ä¸ªåŒºåŸŸï¼Œ$ C  $è¡¨ç¤ºåŒ…å«æ”¯æŒåŒºåŸŸå†…æ‰€æœ‰åƒç´ çš„åƒç´ çº§åŒ¹é…ä»£ä»·çš„é‚»åŸŸï¼Œ$c\_{agg}$å¯ä»¥é€šè¿‡è®¡ç®—$w$å’Œ$C$çš„å·ç§¯å¾—åˆ°ã€‚æ›´å¤§çš„åŒ¹é…åŒºåŸŸä¼šæé«˜è§†å·® åŒ¹é…çš„å‡†ç¡®æ€§ï¼Œä½†æ˜¯ä¼šæ˜¾è‘—æé«˜ç®—æ³•èŠ±è´¹çš„æ—¶é—´ã€‚

å½“å·ç§¯è¿‡ç¨‹æ˜¯ä¸€ä¸ªå‡åŒ€æ–¹æ¡†æ»¤æ³¢ï¼ˆuniform box filteringï¼ŒæŒ‡$w$æ‰€æœ‰çš„å…ƒç´ éƒ½ä¸º1ï¼‰æ—¶ï¼Œ$c\_{AD}$å’Œ$c\_{SD}$çš„èšåˆå½¢å¼å¯ä»¥å†™ä¸ºï¼Œ sum of absolute difference (SAD) å’Œ the sum of squared difference (SSD).

$$
c\_{SAD}(\bm p,d) = \sum\_{q\in \mathscr{N}*p}|i\_L(\bm q) - i\_R(\bm q- \bm d)|,\\
c*{SSD}(\bm p,d) =  \sum\_{q\in \mathscr{N}\_p}(i\_L(\bm q) - i\_R(\bm q- \bm d))^2,
$$

è¿™é‡Œ$\mathscr{N}\_p$å°±æ˜¯$\bm p$è¦åŒ¹é…çš„åŒºåŸŸï¼ˆsupport region, or neighborhood system).

> ä¸€ä¸ªå¤§çš„åŒºåŸŸï¼Œé€šå¸¸åŒ¹é…å¾—æ›´å‡†ï¼Œè¿™æ ·æ›´å¯é ã€‚åŒæ ·ï¼Œä¼šä½¿å¾—è®¡ç®—é‡å¢å¤§ï¼Œç®—æ³•æ•ˆç‡ä¸‹é™ã€‚æ‰€ä»¥è¿™ä¸ª support region çš„å¤§å°æ˜¯éœ€è¦ç²¾å¿ƒæŒ‘é€‰çš„ï¼Œ**åœ¨ç²¾åº¦å’Œé€Ÿåº¦ä¹‹é—´åšå¹³è¡¡**ã€‚

#### C. å½’ä¸€åŒ–äº’ç›¸å…³ï¼šNCCï¼ŒæŠ—å¹²æ‰°

å°½ç®¡SSDã€SGDè®¡ç®—æ•ˆç‡å¾ˆé«˜ï¼Œä½†æ˜¯å¯¹å›¾åƒäº®åº¦åŒºåˆ«ï¼ˆæˆ–äº®åº¦å™ªå£°ï¼‰éå¸¸æ•æ„Ÿï¼Œå¦‚ä¸¤ä¸ªç›¸æœºçš„ä½ç½®ä¸åŒï¼Œæ‹åˆ°çš„åŒä¸€åŒºåŸŸçš„äº®åº¦å¯èƒ½ä¸åŒï¼ˆä½ç½®ã€è§’åº¦ä¸åŒï¼Œå¤ªé˜³å…‰çš„æ•£å°„ã€åå°„æƒ…å†µä¹Ÿä¸ä¸€æ ·ï¼‰ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€äº›å…¶å®ƒçš„ä»£ä»·è®¡ç®—æ–¹æ³•å°±æ¯”è¾ƒæµè¡Œï¼Œæ¯”å¦‚normalized cross-correlation (NCC)ï¼Œ**æŠ—å¹²æ‰°èƒ½åŠ›**æ¯”è¾ƒå¼ºã€‚NCCä»£ä»·æ–¹ç¨‹å¦‚ä¸‹ï¼š

$$
c\_{NCC}(\bm p,d) =\frac{1}{n\sigma\_L\sigma\_R } \sum\_{q\in \mathscr{N}\_p}(i\_L(\bm q) - \mu\_L)(i\_R(\bm q- \bm d)-\mu\_R)
$$

&#x20;è¿™é‡Œ,

$$
\sigma\_L=\sqrt{\sum\_{q\in \mathscr{N}*p}(i\_L(\bm q) - \mu\_L)^2/n},\\
\sigma\_R=\sqrt{\sum*{q\in \mathscr{N}\_p}(i\_R(\bm q - \bm d) - \mu\_R)^2/n},
$$

$\mu\_L,\mu\_R$ä»£è¡¨å·¦å³å›¾åƒæ¡†é‡Œé¢åƒç´ äº®åº¦çš„å‡å€¼ï¼Œ$\sigma\_L,\sigma\_R$ä»£è¡¨å·¦å³å›¾åƒæ¡†åƒç´ äº®åº¦çš„æ ‡å‡†å·®ï¼Œnä»£è¡¨æ¯ä¸ªå›¾åƒæ¡†åƒç´ çš„æ•°é‡ã€‚

> ğŸ“ŒNCCä»£ä»·$c\_{NCC}\in \[-1,1]$åæ˜ äº†ç»™å®šä¸€å¯¹å·¦å³å›¾åƒæ¡†çš„ç›¸ä¼¼åº¦ï¼Œ$c\_{NCC}$è¶Šé«˜ï¼Œä»£è¡¨åŒ¹é…å¾—è¶Šå¥½ã€‚

> NCCè¡¨ç°å¾—æ¯”SADå’ŒSSDè¡¨ç°å¾—æ›´å¥½ï¼Œå®ƒå¯ä»¥é€šè¿‡ç±»ä¼¼SAD/SSDçš„æ–¹æ³•è¿›è¡Œä¼˜åŒ–ã€‚

#### D. è‡ªé€‚åº”ä»£ä»·èšåˆ:FBS

é™¤äº†é€šè¿‡å‡åŒ€æ–¹æ¡†æ»¤æ³¢ï¼ˆuniform box filteringï¼‰èšåˆä»£ä»·ä»¥å¤–ï¼Œè®¸å¤šè‡ªé€‚åº”çš„ä»£ä»·èšåˆç­–ç•¥è¢«ç”¨æ¥æé«˜è§†å·®ä¼°è®¡å‡†ç¡®åº¦ã€‚å…¶ä¸­æœ€è‘—åçš„ä¸€ä¸ªæ–¹æ³•æ˜¯ï¼Œ fast bilateral stereo (FBS)ï¼Œé€šå¸¸è¿‡ç¨‹å¦‚ä¸‹ï¼š

$$
c\_{\mathrm{agg}}(\mathbf{p}, d)=\frac{\sum\_{\mathbf{q} \in \mathscr{N}*{\mathbf{q}}} \omega*{d}(\mathbf{q}) \omega\_{r}(\mathbf{q}) c(\mathbf{q}, d)}{\sum\_{\mathbf{q} \in \mathscr{N}*{\mathbf{q}}} \omega*{d}(\mathbf{q}) \omega\_{r}(\mathbf{q})},
$$

è¿™é‡Œ \*\* \*\*$\omega\_{d},$$\omega\_{r}$**åŸºäºç©ºé—´è·ç¦»å’Œé¢œè‰²ç›¸ä¼¼åº¦è‡ªé€‚åº”è°ƒæ•´**ã€‚cost $c$ æ˜¯åœ¨ä¸€ä¸ªçŸ©å½¢æ¡†é‡Œé¢è¿›è¡Œè‡ªé€‚åº”èšåˆæ¥å¾—åˆ°$c\_{agg}$

è¯¦è§è¿™ç¯‡è®ºæ–‡Fast bilateral stereo ([https://arxiv.org/pdf/1807.02044.pdf](https://arxiv.org/pdf/1807.02044.pdf "https://arxiv.org/pdf/1807.02044.pdf"))

![](image/image_4k5CtdTSYz.png)

![](image/image_nFw2OYo9C8.png)

#### Question:æ€ä¹ˆä¼˜åŒ–c\_{SSD}

æŠŠ$c\_{SSD}$å†™å¼€ï¼Œå¾—åˆ°

$$
c\_{SSD}(\bm p,d) =  \sum\_{q\in \mathscr{N}\_p}(i\_L(\bm q) - i\_R(\bm q- \bm d))^2
\\
==

\sum\_{q\in \mathscr{N}\_p}(i\_L^2(\bm q) - 2i\_L(\bm q)i\_R(\bm q- \bm d) + i\_R^2(\bm q- \bm d))

# \\

\sum\_{q\in \mathscr{N}*p}i\_L^2(\bm q) - 2\sum*{q\in \mathscr{N}*p}i\_L(\bm q)i\_R(\bm q- \bm d) +\sum*{q\in \mathscr{N}\_p} i\_R^2(\bm q- \bm d)
$$

ç”±äºä»¥å·¦å›¾ä¸ºåŸºå‡†ç‚¹ï¼Œæ‰€ä»¥$i\_L(\bm q)$æ˜¯ä¸å˜çš„ï¼Œè¿›è€Œ$\sum\_{q\in \mathscr{N}*p}i\_L^2(\bm q) ã€2\sum*{q\in \mathscr{N}\_p}i\_L(\bm q)$éƒ½æ˜¯å¸¸é‡ï¼Œå¯ä»¥æå‰è®¡ç®—å¥½ä¿å­˜ã€‚è¿™æ ·éœ€è¦è®¡ç®—çš„åªæœ‰$i\_R(\bm q- \bm d)$ã€‚å¯ä»¥å¤§å¹…æé«˜ä¼˜åŒ–é€Ÿåº¦ã€‚å…¶ä»–çš„ä¹Ÿä¸€æ ·ï¼Œè¿™æ˜¯ä¸€ç§ç¼–ç¨‹æ„è¯†ã€‚

> $u\_L ,u\_R$ è¿™äº›å¯ä»¥æå‰ç®—å‡ºæ¥çš„é‡ï¼Œå°±æå‰ç®—å‡ºæ¥å­˜å¥½ï¼Œ**look-up table**ï¼Œå‡å°‘é‡å¤è®¡ç®—ï¼Œå¤§å¹…æå‡æ•ˆç‡ã€‚

# 3 Disparity Optimization è§†å·®ä¼˜åŒ–

**å±€éƒ¨ç®—æ³•**ç®€å•åœ°é€‰æ‹©è§†å·®ï¼Œæ ¹æ®å·¦å³å›¾**æœ€å°çš„åŒºåˆ«**æˆ–**æœ€é«˜çš„ç›¸å…³åº¦**ä»£ä»·ä½œä¸º**æœ€å¥½è§†å·®**ï¼Œå±äº**Winner-Take-All** (WTA)èµ¢å®¶é€šåƒåŸåˆ™ã€‚

## 3.1é©¬å°”ç§‘å¤«é“¾ï¼ˆMRF)

ä¸åŒäºå±€éƒ¨ç®—æ³•ä½¿ç”¨WTAåŸåˆ™ï¼Œ**å…¨å±€ç®—æ³•æŠŠåƒç´ é‚»åŸŸ**ä¹Ÿè®¡ç®—åœ¨å†…ï¼Œå¦‚graph cuts (GC)å’Œ belief propagation (BP)ã€‚è¿™ç±»ç®—æ³•é€šå¸¸ä¼šé‡‡ç”¨**é©¬å°”ç§‘å¤«é“¾ï¼ˆMRF)** ä½œä¸ºå‡ ä½•æ¨¡å‹ã€‚å›¾å½¢$\mathscr{G}=(\mathscr{P},\mathscr{E})$(èŠ±ä½“ $G = (P, E )$)æ˜¯ä¸€ç»„ç”±è¾¹$\mathscr{E}$è¿æ¥èµ·æ¥çš„é¡¶ç‚¹$\mathscr{P}$ï¼Œè¿™é‡Œ$\mathscr{P}={\bm p\_{11},\bm p\_{11},Â·Â·Â·,\bm p\_{mn} }$ï¼Œ$\mathscr{E} = {(\bm p\_{ij},\bm p\_{st}) | \bm p\_{ij},\bm p\_{st}\in\mathscr{P}$,åˆ†äº«åŒä¸€ä¸ªé¡¶ç‚¹çš„ä¸¤ä¸ªè¾¹è¢«ç§°ä¸ºä¸€å¯¹é‚»æ¥è¾¹ã€‚ç”±äºMRFè¢«è®¤ä¸ºæ˜¯æ²¡æœ‰æ–¹å‘çš„ï¼Œæ‰€ä»¥è¿™é‡Œè®¤ä¸º$ (\bm p\_{ij},\bm p\_{st})  $å’Œ$ (\bm p\_{st},\bm p\_{ij})  $æ˜¯ç›¸åŒçš„è¾¹ã€‚$\mathscr{N}*{ij}={\bm p*{1p\_{ij}},\bm p\_{2p\_{ij}},Â·Â·Â·,\bm p\_{kp\_{ij}} |\bm p\_{p\_{ij}} \in \mathscr{P} }$æ˜¯$\bm p\_{ij}$çš„é‚»åŸŸç³»ç»Ÿã€‚

![MRF model](image/image_mD0lCU2HE5.png "MRF model")

å¯¹äºç«‹ä½“è§†è§‰é—®é¢˜ï¼Œ$\mathscr{P}$æ˜¯ä¸€ä¸ª m Ã— n åƒç´ çš„è§†å·®å›¾åƒï¼Œ$\bm p\_{ij}$æ˜¯$(iï¼Œj)$ä½ç½®çš„é¡¶ç‚¹(æˆ–èŠ‚ç‚¹) ï¼ŒèŠ‚ç‚¹è§†å·®å€¼ä¸º $d\_{ij}$.

ç”±äºè€ƒè™‘çš„å€™é€‰å¯¹è±¡è¶Šå¤šï¼Œæ¨æ–­çœŸæ­£çš„è§†å·®å°±è¶Šéš¾ï¼Œå› æ­¤åªè€ƒè™‘é‚»è¿‘ $\bm p\_{ij}$ çš„èŠ‚ç‚¹è¿›è¡Œè§†å·®åŒ¹é…ã€‚è¿™ä¹Ÿè¢«ç§°ä¸ºæˆå¯¹MRF( pairwise MRF).$\bm p\_{ij}$ **çš„è§†å·®æ€»æ˜¯ä¸å…¶é‚»è¿‘èŠ‚ç‚¹æœ‰å¾ˆå¼ºçš„ç›¸å…³æ€§**ï¼Œä½†æ˜¯å®ƒå’Œè§†å·®å›¾ä¸­çš„ä»»ä½•å…¶ä»–éšæœºèŠ‚ç‚¹çš„è¿æ¥å°±æ¯”è¾ƒä¸ç›´æ¥ã€‚ï¼ˆwhile it is linked implicitly to any other random nodes in thedisparity mapï¼‰

## 3.2èƒ½é‡å‡½æ•°

å¯»æ‰¾æœ€ä½³è§†å·®å¯ä»¥é€šè¿‡æœ€å°åŒ–ä¸‹åˆ—èƒ½é‡å‡½æ•°æ¥å®ç°,

$$
E(\bm p) = \sum\_{\bm p\_{ij}\in \mathscr{P}}D(\bm p\_{ij},q\_{\bm p\_{ij}}) + \sum\_{\bm q\_{\bm p\_{ij}}\in \mathscr{N}*{ij}}V(\bm p*{ij},\bm q\_{\bm p\_{ij}})
$$

è¿™é‡Œ $D(Â·),V(Â·)$æ˜¯ä¸¤ä¸ªèƒ½é‡å‡½æ•°ï¼Œ$D(Â·)$ååº”äº†åŒ¹é…ä»£ä»·ï¼Œ$V(Â·)$ç¡®å®šæ¥è‡ªé‚»åŸŸçš„èšåˆã€‚åœ¨MRFæ¨¡å‹ä¸­ï¼Œè‡ªé€‚åº”$V(Â·)$çš„æ„é€ éå¸¸é‡è¦ï¼Œ**å› ä¸ºä¸è¿ç»­åŒºåŸŸçš„äº®åº¦é€šå¸¸ä¸å…¶é‚»è¿‘åŒºåŸŸçš„äº®åº¦æœ‰å¾ˆå¤§å·®å¼‚**ã€‚ç„¶è€Œä¸Šé¢å‡½æ•°æœ€å°åŒ–çš„è®¡ç®—å¤æ‚åº¦å¾ˆé«˜ï¼Œç»™å®æ—¶ä»»åŠ¡å¸¦æ¥å¾ˆå¤§æŒ‘æˆ˜ã€‚ç„¶åSGMå‡ºç°äº†ã€‚

## 3.3 SGM : Semi-global matching

SGMèƒ½é‡å‡½æ•°å¦‚ä¸‹ï¼š

$$
E (\bm D ) = \sum \_ { p } ( c (\bm  p , d \_ {\bm p } ) \\+ \sum \_ {\bm q \in \mathscr{N}*{\bm p} } \lambda \_ { 1 } \delta ( |d \_ { \bm p } - d \_ {\bm q }|=1 ) \\+ \sum \_ {\bm  q \in \mathscr{N}*{\bm p} }  \lambda \_ { 2 } \delta ( |d \_ { \bm p } - d \_ { \bm q }|>1 )
$$

è¿™é‡Œ$  \bm D  $æ˜¯è§†å·®å›¾ï¼Œ$c$æ˜¯åŒ¹é…ä»£ä»·ï¼Œ$\bm q$ æ˜¯$\bm p$ çš„é‚»åŸŸ $\mathscr{N}\_{\bm p}$é‡Œé¢çš„ä¸€ä¸ªåƒç´ ã€‚$ \lambda\_1  $æƒ©ç½šé‚»åŸŸåƒç´ é‡ŒæŸä¸ªè§†å·®çš„åƒç´ ï¼Œæ¯”å¦‚ 1ä¸ªåƒç´ ã€‚$\lambda\_2$æƒ©ç½šé‚»åŸŸåƒç´ é‡Œå¤§äºæŸä¸ªè§†å·®çš„åƒç´ ï¼Œæ¯”å¦‚å¤§äº 1ä¸ªåƒç´ ã€‚$\delta(Â·)$å¦‚æœå‚æ•°ä¸ºçœŸåˆ™è¿”å›1å¦åˆ™è¿”å›0.

# 4 Disparity Refinement è§†å·®æ”¹å–„

è§†å·®æ”¹å–„è¿‡ç¨‹é€šå¸¸åŒ…æ‹¬å‡ ä¸ª**åå¤„ç†**æ­¥éª¤ï¼Œå¦‚**å·¦å³è§†å·®ä¸€è‡´æ€§æ£€æµ‹**ï¼ˆleft-and-right disparity consistency check (LRDCC),ï¼‰å’Œ**äºšåƒç´ å¢å¼º**ï¼ˆsubpixel enhancementï¼‰ã€‚

## 4.1å·¦å³è§†å·®ä¸€è‡´æ€§æ£€æµ‹

å·¦å³è§†å·®ä¸€è‡´æ€§æ£€æµ‹å¯ä»¥ç§»é™¤ç»å¤§éƒ¨åˆ†é®æŒ¡åŒºåŸŸï¼ˆæ¯”å¦‚**å·¦çœ¼èƒ½çœ‹åˆ°ï¼Œå³çœ¼çœ‹ä¸åˆ°**çš„ï¼Œ**åªåœ¨ä¸€ä¸ªå›¾é‡Œå‡ºç°çš„åŒºåŸŸ**ï¼‰

$$
\mathscr{I}*{left}(\bm p) = \mathscr{I}*{right}(\bm p - \[\mathscr{I}\_{left}(\bm p),0]^T)
$$

è¿™é‡Œ$\mathscr{I}*{left}ï¼Œ\mathscr{I}*{right}$è¡¨ç¤ºå·¦å³è§†å·®å›¾ã€‚

![](image/image_zU6ZQ5BeOM.png)

æ·±è“è‰²åŒºåŸŸå°±æ˜¯é®æŒ¡åŒºåŸŸï¼Œè§†å·®ç»™é›¶ã€‚

ä¸€è‡´æ€§æ£€æµ‹æŒ‡ç”¨å·¦è§†å·®å›¾å’Œå³è§†å·®å›¾è¿›è¡Œå¯¹ç…§ï¼Œçœ‹ä¸¤ä¸ªåŒåç‚¹æ˜¯å¦èƒ½å¦ç›¸äº’åŒ¹é…ï¼ˆè§†å·®å€¼ä¹‹å·®çš„ç»å¯¹å€¼æ˜¯å¦å°äºä¸€ä¸ªé˜ˆå€¼ï¼‰ï¼Œå¦‚æœè¶…è¿‡é˜ˆå€¼ï¼Œåˆ™ä¸€è‡´æ€§æ£€æŸ¥ä¸é€šè¿‡ï¼Œå¯¹åº”ä½ç½®åˆ¤å®šä¸ºé®æŒ¡åŒºåŸŸï¼ŒæŠŠå¯¹åº”ä½ç½®çš„è§†å·®å˜ä¸ºæ— æ•ˆå€¼ã€‚ä¸€è‡´æ€§æ£€æŸ¥é€šå¸¸åˆ†ä¸ºå†…éƒ¨å‹å’Œå¤–éƒ¨å‹ä¸¤ç§ï¼Œå†…éƒ¨å‹æ˜¯é€šè¿‡å·¦å›¾çš„ä»£ä»·æ•°ç»„æ¥æ¨ç®—å³å›¾çš„ä»£ä»·æ•°ç»„ï¼Œä»è€Œè®¡ç®—å³å›¾çš„è§†å·®å›¾ã€‚

> å³å›¾$ ( i , j )  $è§†å·®ä¸º$ d  $çš„ä»£ä»· = å·¦å›¾$( i , j + d )$è§†å·®ä¸º$d$çš„ä»£ä»·

## 4.2äºšåƒç´ å¢å¼º

ä¸‰ç»´å‡ ä½•é‡å»ºä¸­ï¼Œ**å¤§äºä¸€ä¸ªåƒç´ çš„è§†å·®è¯¯å·®**å¯èƒ½ä¼šå¯¼è‡´**é‡å»ºç»“æœä¸å¯å¿½è§†çš„å·®å¼‚**ã€‚å› æ­¤ï¼Œ**äºšåƒç´ å¢å¼º**å¯ä»¥ç®€å•åœ°é€šè¿‡åœ¨åˆå§‹è®¡ç®—å‡ºçš„**è§†å·®-ä»£ä»·å›¾é‡Œæ’å€¼**æé«˜è§†å·®å›¾åƒçš„è§£æåº¦ï¼Œä½¿å¾—è§†å·®å›¾åƒå˜å¾—æ›´åŠ **å¹³æ»‘**ã€‚

$$
\mathscr{I}*{subpixel}(\bm p) = \mathscr{I}*{left}(\bm p) + \frac{c(\bm p,d-1) - c(\bm p,d+1)}{2c(\bm p,d-1) + 2c(\bm p,d+1) -4c(\bm p,d)}
$$

![](image/image_GRxHvsSXLJ.png)

è¿™é‡Œçš„$\mathscr{I}*{left}$ã€$\mathscr{I}*{subpixel}$è¡¨ç¤ºçš„æ˜¯åŸå§‹çš„å’Œäºšåƒç´ çš„è§†å·®å›¾ã€‚

![è§†å·®å›¾](image/image_5V_v-iA4hl.png "è§†å·®å›¾")

å¯ä»¥çœ‹å‡ºï¼Œäºšåƒç´ å¢å¼ºä»¥åï¼Œè§†å·®å›¾å˜å¾—æ›´åŠ å¹³æ»‘ã€‚å›¾ä¸­æœ€å¤§çš„é‚£ä¸ªè„¸ï¼Œç”šè‡³èƒ½çœ‹åˆ°å˜´å·´ã€‚

# 5 Deep Stereo Matching æ·±åº¦è§†å·®åŒ¹é…

## 5.1æ·±åº¦è§†å·®åŒ¹é…æ–¹æ³•

*   æ·±åº¦è§†å·®åŒ¹é…æ–¹æ³•å¯ä»¥åˆ†ä¸ºç›‘ç£ï¼Œæ— ç›‘ç£/è‡ªç›‘ç£ã€‚

*   ç›‘ç£ç®—æ³•éœ€è¦å¤§é‡çš„äººå·¥æ ‡æ³¨æ•°æ®(çœŸå€¼æ ‡è®°) ï¼Œè€Œæ— ç›‘ç£å’Œè‡ªç›‘ç£ç®—æ³•åˆ™ä¸éœ€è¦ã€‚

*   æ— ç›‘ç£å’Œè‡ªç›‘ç£æ˜¯æ·±åº¦è§†å·®åŒ¹é…çš„æœªæ¥ã€‚ï¼ˆæˆ‘è§‰å¾—ï¼šä¸æ­¢ï¼Œæ˜¯MLçš„æœªæ¥ï¼‰

![](image/image_vcsD_H3ggh.png)

å¯ä»¥çœ‹å‡ºæ·±åº¦è§†å·®åŒ¹é…æ•ˆæœéå¸¸ä¸é”™å•Šã€‚

## 5.2 CNNï¼Œå·ç§¯ç¥ç»ç½‘ç»œçš„ä½¿ç”¨

éšç€æœºå™¨/æ·±åº¦å­¦ä¹ æŠ€æœ¯çš„å‘å±•ï¼Œ**CNN**(Convolutional Neural Networkï¼Œå·ç§¯ç¥ç»ç½‘ç»œ)å·²ç»æˆä¸ºè§†å·®ä¼°è®¡çš„ä¸»è¦æ–¹æ³•ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå®ƒç”±ä¸€ä¸ªå·ç§¯å±‚ L1å’Œä¸ƒä¸ªå®Œå…¨è¿æ¥å±‚ L2-L8ç»„æˆã€‚

![](image/image_Dzh7xkGYLv.png)

è¿™ä¸ª CNN çš„è¾“å…¥æ˜¯ä¸¤ä¸ª9 Ã— 9åƒç´ çš„ç°åº¦å›¾åƒæ¡†æ¡†ã€‚L1ç”±32ä¸ª5x5x1çš„å·ç§¯æ ¸ç»„æˆï¼ŒL2å’Œ l3å„æœ‰200ä¸ªç¥ç»å…ƒã€‚åœ¨ L3ä¹‹åï¼Œå°†ä¸¤ä¸ª200ç»´ç‰¹å¾å‘é‡è¿æ¥æˆä¸€ä¸ª400ç»´ç‰¹å¾å‘é‡å¹¶é€šè¿‡ L4-L7å±‚ã€‚å±‚ L 8å°† L 7çš„è¾“å‡ºæ˜ å°„æˆä¸¤ä¸ªå®æ•°ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªsoftmaxå‡½æ•°äº§ç”Ÿä¸¤ä¸ªç±»çš„åˆ†å¸ƒ: a)å¥½åŒ¹é…å’Œ b)ååŒ¹é…ã€‚

æœ€åï¼Œåˆ©ç”¨è®¡ç®—æœºè§†è§‰çš„**ä»£ä»·èšåˆå’Œè§†å·®ä¼˜åŒ–/æ”¹å–„æŠ€æœ¯**ç”Ÿæˆæœ€ç»ˆçš„è§†å·®å›¾åƒã€‚è™½ç„¶è¿™ç§æ–¹æ³•å·²ç»è¾¾åˆ°äº†æœ€å…ˆè¿›çš„ç²¾åº¦ï¼Œä½†æ˜¯å®ƒå—åˆ°æ‰€ä½¿ç”¨çš„åŒ¹é…ä»£ä»·èšåˆæŠ€æœ¯çš„é™åˆ¶ï¼Œå¹¶ä¸”å¯èƒ½åœ¨**é®æŒ¡åŒºåŸŸæˆ–çº¹ç†è¾ƒå°‘/åå°„åŒºåŸŸ**äº§ç”Ÿé”™è¯¯çš„é¢„æµ‹ã€‚

å®é™…ä¸Šå°±æ˜¯ç”¨è¿™ä¸ªç½‘ç»œï¼Œæ¥ä»£æ›¿cost function

![](image/image_DWWJ1wFqzi.png)

è™½ç„¶å‰é¢æåˆ°çš„åŸºäº CNN çš„è§†å·®ä¼°è®¡æ–¹æ³•æ•ˆæœå¾ˆä¸é”™ï¼Œä½†æ˜¯å®ƒä»¬å¾€å¾€å«æœ‰å¤§é‡çš„å¯å­¦ä¹ å‚æ•°ï¼Œä»è€Œå¯¼è‡´å¤„ç†æ—¶é—´è¿‡é•¿ã€‚å› æ­¤ï¼Œç›®å‰åŸºäº CNN çš„è§†å·®ä¼°è®¡ç®—æ³•åœ¨è‡ªåŠ¨é©¾é©¶ä¸­è¿˜æ²¡æœ‰å¾—åˆ°å®é™…åº”ç”¨ã€‚æˆ‘ä»¬ç›¸ä¿¡ï¼Œéšç€åµŒå…¥å¼è®¡ç®—æŠ€æœ¯ï¼ˆè¾¹ç¼˜è®¡ç®—ï¼‰çš„è¿›æ­¥ï¼Œè¿™äº›æ–¹æ³•å°†è¢«åº”ç”¨äºæ›´å¤šçš„å®é™…åº”ç”¨ä¸­ã€‚

## 5.3æ‰©å±•ï¼šæœºå™¨å­¦ä¹ 

> æå®æ¯…ï¼šæœºå™¨å­¦ä¹ ï¼Œå°±æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚æˆ‘ä»¬è¦åšçš„å°±æ˜¯å¯»æ‰¾è¿™ä¹ˆä¸€ä¸ªå‡½æ•°ã€‚

è¯¦è§[æœºå™¨å­¦ä¹ -æå®æ¯…-2022/2021](https://www.wolai.com/bZxSBGe6rNECbmHacryy5D "æœºå™¨å­¦ä¹ -æå®æ¯…-2022/2021")è¯¾ç¨‹ï¼š[1æœºå™¨å­¦ä¹ ç›¸å…³æ¦‚å¿µ](https://www.wolai.com/wwDYD1A39k5muR1wekMK8n.md "1æœºå™¨å­¦ä¹ ç›¸å…³æ¦‚å¿µ")

![](image/image_-IBj6dUymQ.png)

> å¦‚ä½•æ‰‹å†™ä¸€ä¸ªCNN?

<https://www.wolai.com/jzE8b26SMKzBq5UMpX4mtN>

# 6 Performance Evaluation æ€§èƒ½è¯„ä¼°

å¦‚ä¸Šæ‰€è¿°ï¼Œè§†å·®ä¼°è®¡çš„**é€Ÿåº¦å’Œç²¾åº¦**æ˜¯ä¸¤ä¸ªå…³é”®çš„æ€§èƒ½ï¼Œå®ƒä»¬æ€»æ˜¯ç›¸äº’å¯¹ç«‹çš„ï¼Œå¦‚ä½•åœ¨æé«˜ç²¾åº¦çš„åŒæ—¶æ‹¥æœ‰ä¸ä¿—çš„é€Ÿåº¦ï¼Œä»è€Œè¾¾åˆ°ä¸€ç§è¾ƒå¥½çš„å¹³è¡¡ï¼Œæ˜¯å…³é”®ã€‚æ‰€ä»¥ç«‹ä½“è§†è§‰ç®—æ³•**æ€§èƒ½è¯„ä»·**é€šå¸¸æ¶‰åŠè¿™ä¸¤ä¸ªæ€§è´¨ã€‚

*   $e\_{RMS} ,e\_{PEP}$è¯„ä¼°ç²¾åº¦

    $ D\_E  $ä¼°è®¡çš„è§†å·®ï¼Œ$D\_G$æ­£ç¡®çš„è§†å·®,

*   $M\_{de/s}$è¯„ä¼°æ•ˆç‡

    å›¾åƒå°ºå¯¸ã€æœ€å¤§è§†å·®å¤§å° æ¯”æ—¶é—´

## 6.1 Root mean squared (RMS) error eRMS: å‡æ–¹æ ¹è¯¯å·®

$$
e\_{RMS}=\sqrt{\frac{1}{N}\sum \_{\bm p \in \mathscr{P}} |\bm D\_E(\bm p) - \bm D\_G(\bm p)|^2  }
$$

## 6.2 Percentage of error pixels(PEP) ePEP(tolerance:\delta\_d pixels

$$
e\_{PEP}={\frac{1}{N}\sum \_{\bm p \in \mathscr{P}} \delta (|\bm D\_E(\bm p) - \bm D\_G(\bm p)| > \delta\_d)  }\times 100%
$$

å…¶ä¸­$\bm D\_{E}$å’Œ$\bm D\_{G}$ åˆ†åˆ«ä»£è¡¨ä¼°è®¡çš„å’ŒçœŸå®çš„è§†å·®; $N$ ä»£è¡¨ç”¨äºè¯„ä»·çš„è§†å·®æ€»æ•°; $\delta\_d$ ä»£è¡¨å®½å®¹åº¦ã€‚

## &#x20;6.3 millions of disparity evaluations per second

è¿™æ˜¯ä¸€ç§æè¿°ç®—æ³•æ•ˆç‡çš„é€šç”¨æ–¹æ³•ï¼Œå³æ¯ç§’æ•°ç™¾ä¸‡æ¬¡çš„è§†å·®ä¼°è®¡ï¼Œå¦‚ä¸‹æ‰€ç¤º:

$$
Mde/s=\frac{u\_{max}v\_{max}d\_{max}}{t}10^{-6}
$$

ç„¶è€Œï¼Œè§†å·®ä¼°è®¡ç®—æ³•çš„é€Ÿåº¦é€šå¸¸ä¼šéšç€å¹³å°çš„ä¸åŒè€Œä¸åŒï¼Œå¹¶ä¸”åˆ©ç”¨å¹¶è¡Œè®¡ç®—å¯ä»¥å¤§å¤§æé«˜è§†å·®ä¼°è®¡çš„é€Ÿåº¦ã€‚

# 7 Maybe

åç»­å‘¢ï¼Œä¹Ÿè®¸å¯ä»¥è‡ªå·±æ‰‹å†™æ–¹ç¨‹ï¼Œæ¥è¿›è¡Œè§†å·®ä¼°è®¡ï¼Œæ€§èƒ½è¯„ä¼°ï¼Œä¹Ÿå¯ä»¥å°è¯•æ­ä¸ªç½‘ç»œçœ‹çœ‹æ•ˆæœã€‚

*   å°è¯•æ‰‹å†™æ–¹ç¨‹

*   å°è¯•æ­ä¸ªç½‘ç»œ

## æ€»ç»“

*è¿™é‡Œå†™æ€»ç»“*

***

*   é‡è¦å†…å®¹æ€»ç»“

    1.

    2.

    3.
