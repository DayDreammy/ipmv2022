# Lecture 13 Sfm and SLAM&#x20;

## ç›®å½•

*   *   [çº¿ç´¢](#çº¿ç´¢)

    *   [ç¬”è®°](#ç¬”è®°)

*   [1 Introductory to SfM and SLAM](#1-introductory-to-sfm-and-slam)

*   [2 Structure from motion (SfM)](#2-structure-from-motion-sfm)

    *   [Step1 : æ”¶é›†å›¾åƒ](#step1--æ”¶é›†å›¾åƒ)

    *   [Step2ï¼šæ£€æµ‹ç‰¹å¾ç‚¹](#step2æ£€æµ‹ç‰¹å¾ç‚¹)

    *   [Step3ï¼šåŒ¹é…ç‰¹å¾ç‚¹](#step3åŒ¹é…ç‰¹å¾ç‚¹)

    *   [Step4ï¼šä½¿ç”¨RANSAC ç§»é™¤ç¦»ç¾¤ç‚¹](#step4ä½¿ç”¨ransac-ç§»é™¤ç¦»ç¾¤ç‚¹)

    *   [Step5ï¼šä¼°è®¡ç›¸æœºå§¿æ€å’Œç‰¹å¾ç‚¹ä¸‰ç»´åæ ‡](#step5ä¼°è®¡ç›¸æœºå§¿æ€å’Œç‰¹å¾ç‚¹ä¸‰ç»´åæ ‡)

    *   [Step6ï¼šä¼˜åŒ–ç›¸æœºå§¿æ€å’Œç‰¹å¾ç‚¹ä¸‰ç»´åæ ‡](#step6ä¼˜åŒ–ç›¸æœºå§¿æ€å’Œç‰¹å¾ç‚¹ä¸‰ç»´åæ ‡)

*   [3 vSLAM](#3-vslam)

    *   [3.1 Visual Odometry and Loop Clouse blocks](#31-visual-odometry-and-loop-clouse-blocks)

    *   [3.2 Egomotion estimationè‡ªè¿åŠ¨ä¼°è®¡](#32-egomotion-estimationè‡ªè¿åŠ¨ä¼°è®¡)

    *   [3.3 Summary](#33-summary)

*   [Homework](#homework)

    *   [æ€»ç»“](#æ€»ç»“)

## çº¿ç´¢

*è¿™é‡Œå†™ä¸»è¦çº¿ç´¢*

***

1.

2.

3.

4.

5.

<!---->

1.

## ç¬”è®°

*è¿™é‡Œæ˜¯ä¸»è¦çš„ç¬”è®°å†…å®¹*

***

authorï¼šYi Yang & Zhengpu Wang

![](image/image_ZXO_xasDLQ.png)

# 1 Introductory to SfM and SLAM

å³æ—¶å®šä½ä¸åœ°å›¾æ„å»º(SLAMï¼ŒSimultaneous localization and mapping)æ˜¯ä¸€ä¸ªæœºå™¨äººåº”ç”¨ï¼Œé€šå¸¸ç”¨äºè‡ªåŠ¨é©¾é©¶æ±½è½¦ã€ç§»åŠ¨æœºå™¨äººå’Œæ— äººæœºï¼Œè·å–å®ƒä»¬çš„ä½ç½®å¹¶æ„å»ºä¸€ä¸ªå…¨å±€ç¯å¢ƒåœ°å›¾ã€‚

ä¸€ä¸ªè‡ªåŠ¨é©¾é©¶æ±½è½¦ç³»ç»Ÿç”±ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆ: 1)ç¡¬ä»¶(HW)å’Œ2)è½¯ä»¶(SW)ã€‚

ç¡¬ä»¶: æ±½è½¦ä¼ æ„Ÿå™¨å’Œæ±½è½¦åº•ç›˜ã€‚&#x20;

è½¯ä»¶: I)æ„ŸçŸ¥ï¼Œ2)å®šä½æ˜ å°„ï¼Œ3)é¢„æµ‹å’Œè·¯å¾„è§„åˆ’; 4)æ§åˆ¶ã€‚

æ±½è½¦ä¼ æ„Ÿå™¨åŒ…æ‹¬æ‘„åƒå¤´ã€æ¿€å…‰é›·è¾¾ã€ IMUã€ GPS ç­‰ã€‚é€šå¸¸éƒ½æ˜¯ä½¿ç”¨å¤šä¸ªä¼ æ„Ÿå™¨çš„ã€‚

![](image/image_csEOYD_OiO.png)

*   æ„ŸçŸ¥æ¨¡å—å¯¹åŸå§‹ä¼ æ„Ÿå™¨æ•°æ®è¿›è¡Œåˆ†æï¼Œè¾“å‡ºæ±½è½¦æ‰€ä½¿ç”¨çš„ç¯å¢ƒä¿¡æ¯ã€‚å®šä½ä¸æ˜ å°„æ¨¡å—ä¸ä»…å¯ä»¥ä¼°è®¡è½¦è¾†çš„ä½ç½®ï¼Œè¿˜å¯ä»¥å»ºç«‹å’Œæ›´æ–°ä¸‰ç»´ä¸–ç•Œåœ°å›¾ã€‚

*   é¢„æµ‹æ¨¡å—åˆ†æå…¶ä»–äº¤é€šå·¥å…·çš„è¿åŠ¨æ¨¡å¼ï¼Œé¢„æµ‹æ±½è½¦çš„æœªæ¥è½¨è¿¹ã€‚

*   è§„åˆ’æ¨¡å—æ ¹æ®æ„ŸçŸ¥ã€å®šä½å’Œæ˜ å°„ä»¥åŠé¢„æµ‹ä¿¡æ¯ç¡®å®šå¯èƒ½çš„å®‰å…¨è½¦è¾†å¯¼èˆªè·¯çº¿ã€‚

*   æ§åˆ¶æ¨¡å—æ ¹æ®é¢„æµ‹çš„è½¨è¿¹å’Œä¼°è®¡çš„è½¦è¾†çŠ¶æ€å‘æ²¹é—¨ã€åˆ¶åŠ¨æˆ–è½¬å‘æ‰­çŸ©å‘é€é€‚å½“çš„æŒ‡ä»¤ã€‚

è¿åŠ¨ç»“æ„(SfM)æ˜¯ä¸€ç§æ‘„å½±æµ‹é‡è·ç¦»æˆåƒæŠ€æœ¯ï¼Œç”¨äºä»å¯èƒ½ä¸å±€éƒ¨è¿åŠ¨ä¿¡å·è€¦åˆçš„äºŒç»´å›¾åƒåºåˆ—ä¸­ä¼°è®¡ä¸‰ç»´ç»“æ„ã€‚å®ƒåœ¨è®¡ç®—æœºè§†è§‰å’Œç”Ÿç‰©è§†è§‰é¢†åŸŸè¿›è¡Œç ”ç©¶ã€‚åœ¨ç”Ÿç‰©è§†è§‰ä¸­ï¼ŒSfM æ˜¯æŒ‡äººç±»(å’Œå…¶ä»–ç”Ÿç‰©)å¯ä»¥ä»è¿åŠ¨ç‰©ä½“æˆ–åœºæ™¯çš„æŠ•å½±äºŒç»´(è§†ç½‘è†œ)è¿åŠ¨åœºä¸­æ¢å¤ä¸‰ç»´ç»“æ„çš„ç°è±¡ã€‚

![SfM](image/image_hLfJyqtPmG.png "SfM")

SfM å’Œ SLAM éƒ½æ˜¯ååˆ†ç»¼åˆçš„ CV å’Œæœºå™¨äººé—®é¢˜ã€‚æ‰€ä»¥åŒå­¦æœ€å¥½å¤ä¹ ä¸€ä¸‹ä¹‹å‰Lectureä¸­çš„æ•°å­¦éƒ¨åˆ†ã€‚

![SLAM](image/image_RK2zHTibCZ.png "SLAM")

SfMå’ŒSLAMçš„åŒºåˆ«

> ğŸ¥‡Sfm : ä¾§é‡struction
>
> SLAM ï¼š ä¾§é‡location ï¼Œè¯„ä¼°çœŸå®è½¨è¿¹å’Œä¼°è®¡è½¨è¿¹çš„ç›¸ä¼¼åº¦

# 2 Structure from motion (SfM)

SfMå…¸å‹å…­æ­¥ï¼š

1.  æ”¶é›†å›¾åƒ

2.  æ£€æµ‹ç‰¹å¾ç‚¹

3.  åŒ¹é…ç‰¹å¾ç‚¹

4.  ä½¿ç”¨RANSAC ç§»é™¤ç¦»ç¾¤ç‚¹

5.  ä¼°è®¡ç›¸æœºå§¿æ€å’Œç‰¹å¾ç‚¹ä¸‰ç»´åæ ‡

6.  ä¼˜åŒ–ç›¸æœºå§¿æ€å’Œç‰¹å¾ç‚¹ä¸‰ç»´åæ ‡

æ³¨ï¼šRANSACæ¥æ¶ˆé™¤ç¦»ç¾¤ç‚¹ ï¼Œ é¿å…ç¦»ç¾¤ç‚¹å¯¹æœ€å°äºŒä¹˜æ³•æ‹Ÿåˆçš„å½±å“

## Step1 : æ”¶é›†å›¾åƒ

![](image/image_IMJ11mrtmt.png)

## Step2ï¼šæ£€æµ‹ç‰¹å¾ç‚¹

![](image/image_orCCzbZR1g.png)

## Step3ï¼šåŒ¹é…ç‰¹å¾ç‚¹

![](image/image_9hGRQjC6Oo.png)

## Step4ï¼šä½¿ç”¨RANSAC ç§»é™¤ç¦»ç¾¤ç‚¹

![](image/image_T4SI8kEmDP.png)

## Step5ï¼šä¼°è®¡ç›¸æœºå§¿æ€å’Œç‰¹å¾ç‚¹ä¸‰ç»´åæ ‡

ç»™å®šï¼Œå¸¦æœ‰nä¸ªå›ºå®š3Dç‚¹çš„må¼ å›¾ç‰‡

$$
\lambda\_{i j} \mathbf{x}*{i j}=\mathbf{P}*{i} \mathbf{X}\_{j}, i=1, \ldots, m ; j=1, \ldots n
$$

é—®é¢˜ï¼šæ ¹æ® mn å¯¹åº”é¡¹$\bm  X\_ij$ä¼°è®¡ mä¸ª æŠ•å½±çŸ©é˜µ $\bm P\_i$ å’Œ n ä¸ª3Dç‚¹ $\bm X\_j$

![](image/image_1MQJc9WXBU.png)

## Step6ï¼šä¼˜åŒ–ç›¸æœºå§¿æ€å’Œç‰¹å¾ç‚¹ä¸‰ç»´åæ ‡

æœ€å°åŒ–ï¼š

$$
\sum\_{i=1}^{m} \sum\_{j=1}^{n} w\_{i j}\left|\mathbf{x}*{i j}-\frac{1}{\lambda*{i j}} \mathbf{P}*{i} \mathbf{X}*{j}\right|^{2}
$$

è¿™é‡Œ w æ˜¯ä¸€ä¸ªå¯è§æ€§æ ‡å¿—

![](image/image_c2GeBFV0bp.png)

ETH Structure from Motion Dataset

![](image/image_iioV0yxePl.png)

[https://cvg.ethz.ch/research/symmetries-in-sfm/](https://cvg.ethz.ch/research/symmetries-in-sfm/ "https://cvg.ethz.ch/research/symmetries-in-sfm/")

BigSFM:Reconstructing the World from Internet Photos

![](image/image_YZty85jhnm.png)

[https://www.cs.corncll.cdu/projccts/bigsfm/](https://www.cs.corncll.cdu/projccts/bigsfm/ "https://www.cs.corncll.cdu/projccts/bigsfm/")

# 3 vSLAM

## 3.1 Visual Odometry and Loop Clouse blocks

SLAM çš„ä¸»è¦ç›®æ ‡æ˜¯è·å¾—æœºå™¨äººè·¯å¾„çš„å…¨å±€ä¸€è‡´ä¼°è®¡ã€‚ç¯å¢ƒåœ°å›¾é€šå¸¸åªæ˜¯ä¸ºäº†å¸®åŠ©æœ¬åœ°åŒ–è€Œä¿å­˜çš„ã€‚

åœ°å›¾ä¿¡æ¯æ˜¯åˆ©ç”¨è§†è§‰é‡Œç¨‹è®¡å’Œç¯è·¯æ£€æµ‹ï¼ˆVisual Odometry and Loop Clouse blocksï¼‰ã€‚å½“æ£€æµ‹åˆ°ä¸€ä¸ªç¯è·¯é—­åˆæ—¶ï¼Œè¿™ä¸ªä¿¡æ¯è¢«ç”¨æ¥å‡å°‘è´´å›¾å’Œå§¿æ€æ ¡æ­£ä¸­çš„æ¼‚ç§»ã€‚

é—­ç¯æ£€æµ‹æ˜¯ SLAM é™¤å®šä½å¤–çš„ä¸€ä¸ªå…³é”®é—®é¢˜ã€‚

![Building blocks ofVisual SLAM](image/image_So2FCmN5KB.png "Building blocks ofVisual SLAM")

> ç´¯è®¡è¯¯å·®è¶Šæ¥è¶Šå¤§ï¼Œé€šè¿‡æ£€æµ‹å›ç¯ç‚¹ï¼Œåšä¸€äº›ä¼˜åŒ–ï¼ˆæŠŠæ›²çº¿æ‹‰ä¸Šæ¥ï¼‰

è§†è§‰é‡Œç¨‹æµ‹é‡æ˜¯è§†è§‰ SLAM çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ä¹‹ä¸€ï¼Œå…¶ä»–ä¸»è¦ç»„æˆéƒ¨åˆ†æœ‰ç¯è·¯èšåˆã€åç«¯ä¼˜åŒ–å’Œé‡æ„ã€‚

é‡æ„åœ¨ç»å…¸çš„ SLAM æ–¹æ³•ä¸­ä¼¼ä¹æ˜¯ä¸å¿…è¦çš„ï¼Œä½†æ˜¯å¤§å¤šæ•°åº”ç”¨ç¨‹åºéœ€è¦ä¸€ä¸ªå¯†é›†çš„ç¯å¢ƒè¡¨ç¤ºï¼Œè¿™æ˜¯ç”±é‡å»ºå—æä¾›çš„ã€‚

å¯†é›†åœ°å›¾å¯ç”¨äºå¯¼èˆªã€é¿éšœå’Œæœºå™¨äººåº”ç”¨ä¸­çš„äº¤äº’ã€‚

å¤§å¤šæ•°ç°æœ‰çš„è§†è§‰é‡Œç¨‹æµ‹é‡æ–¹æ³•åŸºäºä»¥ä¸‹6ä¸ªæ­¥éª¤ï¼š

1.  è·å–è¾“å…¥å›¾åƒ: ä½¿ç”¨å•ä¸ªç›¸æœºï¼Œç«‹ä½“ç›¸æœºï¼Œæˆ–å…¨æ–¹ä½ç›¸æœºã€‚(Lecture 2)

2.  å›¾åƒæ ¡æ­£: åº”ç”¨å›¾åƒå¤„ç†æŠ€æœ¯å»é™¤é€é•œå¤±çœŸç­‰(Lecture4)&#x20;

3.  ç‰¹å¾æå–: å®šä¹‰å…´è¶£æ“ä½œç¬¦ï¼Œè·¨å¸§åŒ¹é…ç‰¹å¾å¹¶æ„å»ºä¸€ä¸ªå…‰æµåœºã€‚

4.  ç‰¹å¾æå–å’Œç›¸å…³æ€§ã€‚(Lecture 03/05/06/12)

    *   ä½¿ç”¨ç›¸å…³æ€§ï¼Œè€Œä¸æ˜¯é•¿æœŸçš„ç‰¹å¾è·Ÿè¸ªï¼Œæ¥å»ºç«‹ä¸¤å¹…å›¾åƒçš„å¯¹åº”å…³ç³»ã€‚

    *   æ„é€ å…‰æµåœº(Lucas-Kanade æ³•)

&#x20;5\. æ ¹æ®å…‰æµä¼°è®¡æ‘„å½±æœºçš„è¿åŠ¨ã€‚(Lecture 03/04/05/06)

*   æ–¹æ³•1: çŠ¶æ€ä¼°è®¡åˆ†å¸ƒç»´æŠ¤çš„å¡å°”æ›¼æ»¤æ³¢å™¨ã€‚

*   æ–¹æ³•2: æ‰¾å‡ºç‰¹å¾çš„å‡ ä½•å’Œ3D å±æ€§ï¼Œæœ€å°åŒ–åŸºäºä¸¤ä¸ªç›¸é‚»å›¾åƒä¹‹é—´é‡æ–°æŠ•å½±è¯¯å·®çš„ä»£ä»·å‡½æ•°ã€‚è¿™å¯ä»¥é€šè¿‡æ•°å­¦æœ€å°åŒ–æˆ–éšæœºæŠ½æ ·æ¥å®Œæˆã€‚

6\. å®šæœŸé‡æ–°å¡«å……è·Ÿè¸ªç‚¹ï¼Œä»¥ä¿æŒå›¾åƒçš„è¦†ç›–ç‡ã€‚(Lecture 10/I 1/12)

## 3.2 Egomotion estimationè‡ªè¿åŠ¨ä¼°è®¡

Egomotion è¢«å®šä¹‰ä¸ºä¸€ä¸ªæ‘„åƒæœºåœ¨ä¸€ä¸ªç¯å¢ƒä¸­çš„3D è¿åŠ¨ã€‚è‡ªè¿åŠ¨ä¼°è®¡çš„è¿‡ç¨‹å°±æ˜¯è®¡ç®—å˜æ¢çŸ©é˜µ. åœ¨è®¡ç®—æœºè§†è§‰ä¸­ï¼ŒEgomotion ä¼°è®¡ç›¸æœºç›¸å¯¹äºåˆšæ€§åœºæ™¯ï¼ˆrigid sceneï¼‰çš„è¿åŠ¨ã€‚VO å’ŒEgomotion estimationé€šå¸¸æ˜¯å¯ä»¥äº’æ¢çš„ã€‚

KITTI Visual Odometry/SLAM Dataset

![](image/image_jfYwcEGPkd.png)

[http://www.cvlibs.net/datasets/kitti/eval\_odometry.php](http://www.cvlibs.net/datasets/kitti/eval_odometry.php "http://www.cvlibs.net/datasets/kitti/eval_odometry.php")

## 3.3 Summary

*   Structure from Motion(SfM)æ˜¯ä»ä¸€ç»„äºŒç»´å›¾åƒä¸­ä¼°è®¡åœºæ™¯çš„ä¸‰ç»´ç»“æ„çš„è¿‡ç¨‹ã€‚

*   Visual simultaneous localization and mapping (VSLAM)è®¡ç®—ç›¸æœºçš„ä½ç½®å’Œæ–¹å‘ä¸å…¶å‘¨å›´ç¯å¢ƒçš„å…³ç³»ï¼ŒåŒæ—¶æ˜ å°„ç¯å¢ƒã€‚

*   Visual Odometry (VO)æ˜¯é€šè¿‡åˆ†æç›¸å…³çš„æ‘„åƒæœºå›¾åƒæ¥ç¡®å®šæœºå™¨äººçš„ä½ç½®å’Œæ–¹å‘çš„è¿‡ç¨‹ã€‚å®ƒè¢«å¹¿æ³›åº”ç”¨äºå„ç§æœºå™¨äººåº”ç”¨ä¸­ã€‚ VO çš„ç›®æ ‡æ˜¯é€æ­¥æ¢å¤è·¯å¾„ï¼Œé€å§¿æ€ï¼Œå¹¶ä¸”åªä¼˜åŒ–è·¯å¾„çš„æœ€å n ä¸ªå§¿åŠ¿ã€‚

*   Egomotionè¢«å®šä¹‰ä¸ºä¸€ä¸ªæ‘„åƒæœºåœ¨ä¸€ä¸ªç¯å¢ƒä¸­çš„3D è¿åŠ¨ã€‚

> ğŸ‰R.Fan : Sfmå’ŒSLAMçš„ç ”ç©¶å·²ç»æ¯”è¾ƒé¥±å’Œäº†ï¼Œå¾ˆéš¾å‡ºæˆæœäº†ã€‚å½“ç„¶å› ä¸ºæ¯”è¾ƒæˆç†Ÿäº†ï¼Œæ‰€ä»¥æ˜¯æ¯”è¾ƒæœ‰ç”¨çš„ã€‚

# Homework

Read these materials:&#x20;

Structure from Motion (CVPRâ€™16):&#x20;

[https://www.cv-foundation.org/openaccess/content\_cvpr\_2016/papers/Schonberger\_Structure-From-Motion\_Revisited\_CVPR\_2016\_paper.pdf](https://www.cv-foundation.org/openaccess/content_cvpr_2016/papers/Schonberger_Structure-From-Motion_Revisited_CVPR_2016_paper.pdf "https://www.cv-foundation.org/openaccess/content_cvpr_2016/papers/Schonberger_Structure-From-Motion_Revisited_CVPR_2016_paper.pdf")

&#x20;Review of visual odometry: [https://springerplus.springeropen.com/articles/10.1186/s40064-016-3573-7](https://springerplus.springeropen.com/articles/10.1186/s40064-016-3573-7 "https://springerplus.springeropen.com/articles/10.1186/s40064-016-3573-7")

## æ€»ç»“

*è¿™é‡Œå†™æ€»ç»“*

***

*   é‡è¦å†…å®¹æ€»ç»“

    1.

    2.

    3.
